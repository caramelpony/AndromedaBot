"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.Parcel = void 0;
const builder = require("xmlbuilder");
const ParcelFlags_1 = require("../../enums/ParcelFlags");
class Parcel {
    constructor(region) {
        this.region = region;
    }
    canIRez() {
        if (this.ParcelFlags & ParcelFlags_1.ParcelFlags.CreateObjects) {
            return true;
        }
        if (this.region.agent.activeGroupID.equals(this.OwnerID) && this.ParcelFlags & ParcelFlags_1.ParcelFlags.CreateGroupObjects) {
            return true;
        }
        if (this.OwnerID.equals(this.region.agent.agentID)) {
            return true;
        }
        return false;
    }
    exportXML() {
        const document = builder.create('LandData');
        document.ele('Area', this.Area);
        document.ele('AuctionID', this.AuctionID);
        document.ele('AuthBuyerID', this.AuthBuyerID.toString());
        document.ele('Category', this.Category);
        document.ele('ClaimDate', this.ClaimDate);
        document.ele('ClaimPrice', this.ClaimPrice);
        document.ele('GlobalID', this.ParcelID.toString());
        document.ele('GroupID', this.GroupID.toString());
        document.ele('IsGroupOwned', this.IsGroupOwned);
        document.ele('Bitmap', this.Bitmap.toString('base64'));
        document.ele('Description', this.Desc);
        document.ele('Flags', this.ParcelFlags);
        document.ele('LandingType', this.LandingType);
        document.ele('Name', this.Name);
        document.ele('Status', this.Status);
        document.ele('LocalID', this.LocalID);
        document.ele('MediaAutoScale', this.MediaAutoScale);
        document.ele('MediaID', this.MediaID.toString());
        document.ele('MediaURL', this.MediaURL);
        document.ele('MusicURL', this.MusicURL);
        document.ele('OwnerID', this.OwnerID.toString());
        document.ele('ParcelAccessList');
        document.ele('PassHours', this.PassHours);
        document.ele('PassPrice', this.PassPrice);
        document.ele('SalePrice', this.SalePrice);
        document.ele('SnapshotID', this.SnapshotID.toString());
        document.ele('UserLocation', this.UserLocation.toString());
        document.ele('UserLookAt', this.UserLookAt.toString());
        document.ele('Dwell', 0);
        document.ele('OtherCleanTime', this.OtherCleanTime);
        return document.end({ pretty: true, allowEmpty: true });
    }
}
exports.Parcel = Parcel;
//# sourceMappingURL=Parcel.js.map